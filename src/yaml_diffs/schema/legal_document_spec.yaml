# OpenSpec Schema Definition for Legal Documents
# Language-agnostic contract for document structure
#
# Note: This schema uses OpenAPI 3.0.0 format to match the Pydantic models.
# The schema defines the structure for Hebrew legal documents with recursive sections.

openapi: 3.0.0
info:
  title: Legal Document Schema
  version: 1.0.0
  description: |
    Schema for representing Hebrew legal and regulatory documents in a flexible,
    nested YAML format. Supports unlimited nesting, stable UUIDs, and Hebrew text.

components:
  schemas:
    Section:
      type: object
      description: |
        Represents a section in a legal document. Sections can be nested
        recursively to unlimited depth. Each section must have a stable UUID
        identifier for reliable diffing across versions.
      required: []
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier (UUID). Auto-generated if not provided.
            Must be a valid UUID v4.
        content:
          type: string
          default: ""
          description: |
            Text content for this section level only (not children).
            Supports Hebrew text (UTF-8 encoding).
        marker:
          type: string
          nullable: true
          description: |
            Optional structural marker (e.g., "◊ê", "1", "a").
            Supports Hebrew text (UTF-8 encoding).
        title:
          type: string
          nullable: true
          description: |
            Optional section title. Supports Hebrew text (UTF-8 encoding).
        sections:
          type: array
          items:
            $ref: "#/components/schemas/Section"
          default: []
          description: |
            Optional list of nested child sections. Supports unlimited nesting depth.

    Document:
      type: object
      description: |
        Represents a complete legal document. A document contains metadata
        and a list of root sections. Sections can be nested recursively to
        unlimited depth.
      required:
        - version
      properties:
        title:
          type: string
          nullable: true
          description: |
            Document name or title. Supports Hebrew text (UTF-8 encoding).
        authors:
          type: array
          items:
            type: string
          nullable: true
          description: |
            List of authors, entities, or organizations. Each author is a string.
            Supports Hebrew text (UTF-8 encoding).
        version:
          type: string
          description: |
            Document version identifier (e.g., "1.0", "2024-01-15").
            This is separate from published_date and updated_date.
        source:
          type: string
          nullable: true
          description: |
            Optional source identifier or URL for the document.
        published_date:
          type: string
          format: date-time
          nullable: true
          description: |
            Publication date in ISO 8601 format (YYYY-MM-DD or YYYY-MM-DDTHH:MM:SS).
            Example: "2024-01-15" or "2024-01-15T10:30:00Z"
        updated_date:
          type: string
          format: date-time
          nullable: true
          description: |
            Last update date in ISO 8601 format (YYYY-MM-DD or YYYY-MM-DDTHH:MM:SS).
            Example: "2024-01-15" or "2024-01-15T10:30:00Z"
        sections:
          type: array
          items:
            $ref: "#/components/schemas/Section"
          default: []
          description: |
            List of root-level sections in the document.
